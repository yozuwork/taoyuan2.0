(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();var l,g;document.getElementById("phoneLastThree").addEventListener("input",function(i){this.value=this.value.replace(/\D/g,"").slice(0,3)});document.addEventListener("DOMContentLoaded",function(){g=document.createElement("div"),g.id="arbox",document.body.appendChild(g),l=new Vue({el:"#app",data:{viewPage:localStorage.getItem("viewPage")||"home",slidesData:["assets/images/s1.png","https://thumb.ac-illust.com/30/306837819e76342840641fd1d53fd2f9_t.jpeg","assets/images/s1.png"],currentIndex:0,is_viewed:!1,isDisabled:!1},methods:{showSlide(i){this.currentIndex=i},prevSlide(){this.currentIndex=(this.currentIndex-1+this.slidesData.length)%this.slidesData.length},nextSlide(){this.currentIndex=(this.currentIndex+1)%this.slidesData.length},changeViewPage(i,o){const a=document.getElementById("background-music");o&&a.paused&&a.play(),console.log(`Changing viewPage to ${i}`),this.viewPage=i,(this.viewPage==="arpage"||this.viewPage==="arpage02")&&(localStorage.setItem("viewPage",i),location.reload())},nextPage(){console.log("nextPage called"),this.is_viewed?(console.log("is_viewed is true, changing viewPage to qa01"),this.changeViewPage("qa01")):alert("請觀看完影片")},checkAnswer(i,o){if(this.isDisabled)return;this.isDisabled=!0;const a=document.querySelectorAll(".ansbox");a.forEach(n=>{n.disabled=!0,n.classList.remove("ansbox-active")}),o.target.classList.add("ansbox-active");const s=n=>{document.querySelectorAll(`.${n}`).forEach(c=>{c.style.display="block"})},e=n=>{document.querySelectorAll(`.${n}`).forEach(c=>{c.style.display="none"})},t=()=>{a.forEach(n=>{n.disabled=!1,n.classList.remove("ansbox-active")})};i?(s("correct"),setTimeout(()=>{e("correct"),t(),this.viewPage==="qa01"?this.changeViewPage("qa02"):this.viewPage==="qa02"?this.changeViewPage("qa03"):this.viewPage==="qa03"?this.changeViewPage("qa04"):this.viewPage==="qa04"?this.changeViewPage("qa05"):this.viewPage==="qa05"&&this.changeViewPage("results"),Vue.nextTick(()=>window.scrollTo(0,0)),this.isDisabled=!1},1e3)):(s("mistake"),setTimeout(()=>{e("mistake"),t(),this.isDisabled=!1},1e3))},loadARScripts(){[{id:"aframe-script",src:"https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"},{id:"arjs-script",src:"https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"}].forEach(({id:o,src:a})=>{if(!document.getElementById(o)){const s=document.createElement("script");s.id=o,s.src=a,document.head.appendChild(s)}})},unloadARScripts(){["aframe-script","arjs-script"].forEach(i=>{const o=document.getElementById(i);o&&document.head.removeChild(o)})},initAR(){if(this.viewPage==="arpage"||this.viewPage==="arpage02"){const i=this;AFRAME.registerComponent("image-tracker-1",{init(){console.log("image-tracker-1 init")},tick(){this.el.object3D.visible&&(console.log("image-tracker-1 detected"),localStorage.setItem("viewPage","poster"),i.changeViewPage("poster","keep"),location.reload())}}),AFRAME.registerComponent("image-tracker-2",{init(){console.log("image-tracker-2 init")},tick(){this.el.object3D.visible&&(console.log("image-tracker-2 detected"),localStorage.setItem("viewPage","video-view"),i.changeViewPage("video-view","keep"),location.reload())}})}},updateOverflow(){document.body.style.overflowY=this.viewPage==="arpage"||this.viewPage==="arpage02"?"hidden":"auto"}},watch:{viewPage(i,o){o!=="keep"&&localStorage.setItem("viewPage","home");const a=document.getElementById("background-music");this.viewPage!=="home"?a.play():a.pause(),console.log(`viewPage changed to ${i}`),Vue.nextTick(()=>window.scrollTo(0,0)),this.updateOverflow();const s=document.querySelectorAll("a-scene"),e=document.querySelectorAll("video");i==="arpage"||i==="arpage02"?(this.initAR(),e.forEach(t=>t.style.display="block"),s.forEach(t=>t.style.display="block")):(e.forEach(t=>t.style.display="none"),s.forEach(t=>t.style.display="none"))}},mounted(){const i=document.getElementById("youtubeVideo1"),o=document.getElementById("youtubeVideo2");let a=!1,s=!1,e=null;function t(){new YT.Player(i,{events:{onStateChange:u}}),new YT.Player(o,{events:{onStateChange:h}})}const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";const c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(n,c);function u(r){r.data===YT.PlayerState.ENDED&&(a=!0,console.log("Video 1 completed"),d())}function h(r){r.data===YT.PlayerState.PLAYING&&(console.log("Video 2 is playing"),e||(e=new Date().getTime(),setTimeout(m,3e4))),(r.data===YT.PlayerState.PAUSED||r.data===YT.PlayerState.ENDED)&&d()}function m(){(new Date().getTime()-e)/1e3>=30&&(s=!0,console.log("Video 2 watched for 30 seconds"),d())}function d(){console.log("Checking if both videos completed and 30 seconds watched for Video 2"),console.log("Video1 Completed: "+a),console.log("Video2 30 Seconds Watched: "+s),a&&s&&(console.log("Both conditions met, setting is_viewed to true"),l.is_viewed=!0)}t(),this.$nextTick(this.updateOverflow)}}),window.addEventListener("resize",l.updateOverflow),l.loadARScripts()});console.log("Hello world!");
